<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pie Chart - 1</title>
    <style type="text/css">
        body {
        }
        .exes {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 2rem 0;
        }
        svg {
            width: 250px;
            height: 250px;
        }
        g circle:first-child {
            stroke:  green;
        }
        g circle:nth-child(2) {
            stroke:  yellow;
        }
        g circle:nth-child(3) {
            stroke:  tomato;
        }
        g circle:nth-child(4) {
            stroke:  olive;
        }
    </style>
</head>
<body>
    <div class="root">

        <h1>Pie Chart - 1</h1>

        
        <div class="exes">
            <svg height="20" width="20" viewBox="0 0 20 20">
                <circle r="10" cx="10" cy="10" fill="gray" />
                 <g stroke-width="10"
                    transform="rotate(-90) translate(-20)" 
                    fill="transparent" >
                    <circle r="5" cx="10" cy="10" 
                          stroke="tomato"
                          stroke-dasharray="calc(35 * 31.4 / 100) 31.4" />
                    <circle r="5" cx="10" cy="10" 
                          stroke="green"
                          stroke-dasharray="calc(20 * 31.4 / 100) 31.4" />
                </g>
            </svg>

        </div>


        <div class="exes" id="test">
            <svg height="20" width="20" viewBox="0 0 20 20">
                <circle r="10" cx="10" cy="10" fill="gray" />
                 <g stroke-width="10"
                    transform="rotate(-90) translate(-20)" 
                    fill="transparent" >
                    <circle r="5" cx="10" cy="10" />
                    <circle r="5" cx="10" cy="10" />
                    <circle r="5" cx="10" cy="10" />
                    <circle r="5" cx="10" cy="10" />
                </g>
            </svg>
            <script type="text/javascript">

                const testEl = document.querySelector('#test')
                const data = [40, 30, 20, 10]

                let sum = 0
                let percentages = data.map( percentage => {
                    sum += percentage
                    return sum
                })
                percentages = percentages.reverse()

                testEl.querySelectorAll('g circle')
                    .forEach( (el, index) => {
                    const percentage = percentages[index]
                    const circumference = 31.4
                    const strokeDash = (percentage * circumference) / 100;
                    const strokeDashArray = `${strokeDash} ${circumference}`;
                    el.setAttribute('stroke-dasharray', strokeDashArray)
                })
            </script>
        </div>


        <div class="exes" id="test2">
            <svg height="20" width="20" viewBox="0 0 20 20" >
                <circle r="10" cx="10" cy="10" fill="gray" />
                 <g stroke-width="10"
                    transform="rotate(-90) translate(-20)" 
                    fill="transparent" >
                </g>
            </svg>
            <script type="text/javascript">
                const test2El = document.querySelector('#test2')
                const circleEl = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circleEl.setAttribute('r', 5)
                circleEl.setAttribute('cx', 10)
                circleEl.setAttribute('cy', 10)
                circleEl.setAttribute('stroke-dasharray', '10 20')
                test2El.querySelector('g').appendChild(circleEl)
            </script>
        </div>


        <div class="exes" id="test3">
            <svg height="20" width="20" viewBox="0 0 20 20">
                <circle r="10" cx="10" cy="10" fill="gray" />
                 <g stroke-width="10"
                    transform="rotate(-90) translate(-20)" 
                    fill="transparent" >
                </g>
            </svg>
            <script type="text/javascript">

                const test3 = () => {
                    const test3El = document.querySelector('#test3')
                    const data = [40, 30, 20, 10]

                    let sum = 0
                    let percentages = data.map( percentage => {
                        sum += percentage
                        return sum
                    })
                    percentages = percentages.reverse()

                    const fragement = new DocumentFragment
                    percentages.forEach( (percentage) => {
                        const circumference = 31.4
                        const strokeDash = (percentage * circumference) / 100
                        const strokeDashArray = `${strokeDash} ${circumference}`
                        const el = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        el.setAttribute('r', 5)
                        el.setAttribute('cx', 10)
                        el.setAttribute('cy', 10)
                        el.setAttribute('stroke-dasharray', strokeDashArray)
                        fragement.appendChild(el)
                    })
                    test3El.querySelector('g').appendChild(fragement)
                }
                test3()
                
            </script>
        </div>


    </div>
  
</body>
</html>

